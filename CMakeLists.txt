project(AshEdit)
cmake_minimum_required(VERSION 2.6)

option(MO2 "Build for Monster RPG 2 format levels" on)
option(TGA "Use .tga tile sheets" off)
option(SS "Use 8x8 tiles" off)

if(NOT ("${USER_INCLUDE_PATH}" STREQUAL ""))
	include_directories(${USER_INCLUDE_PATH})
endif(NOT ("${USER_INCLUDE_PATH}" STREQUAL ""))
if(NOT ("${USER_LIBRARY_PATH}" STREQUAL ""))
	link_directories(${USER_LIBRARY_PATH})
endif(NOT ("${USER_LIBRARY_PATH}" STREQUAL ""))

set(ASHEDIT_SRC main.cpp general.cpp)

if(WIN32)
	if(MO2)
		set(CMAKE_CXX_FLAGS_RELEASE "${CMAKE_CXX_FLAGS_RELEASE} /DMONSTERRPG2")
	endif()
	if(TGA)
		set(CMAKE_CXX_FLAGS_RELEASE "${CMAKE_CXX_FLAGS_RELEASE} /DUSE_TGA")
	endif()
	if(SS)
		set(CMAKE_CXX_FLAGS_RELEASE "${CMAKE_CXX_FLAGS_RELEASE} /DUSE_8X8")
	endif()
	set(CMAKE_CXX_FLAGS_RELEASE "${CMAKE_CXX_FLAGS_RELEASE} /MT")
	list(APPEND ASHEDIT_SRC "icon.rc")
	add_executable(ashedit WIN32 ${ASHEDIT_SRC})
else()
	if(MO2)
		set(CMAKE_CXX_FLAGS_RELEASE "${CMAKE_CXX_FLAGS_RELEASE} -DMONSTERRPG2")
	endif()
	if(TGA)
		set(CMAKE_CXX_FLAGS_RELEASE "${CMAKE_CXX_FLAGS_RELEASE} -DUSE_TGA")
	endif()
	if(SS)
		set(CMAKE_CXX_FLAGS_RELEASE "${CMAKE_CXX_FLAGS_RELEASE} -DUSE_8X8")
	endif()
	add_executable(ashedit ${ASHEDIT_SRC})
endif()

if(WIN32)
	target_link_libraries(ashedit "tgui2" "allegro_monolith-static" "freetype_static" "libpng16_static" "jpeg-static" "zlibstatic" "opengl32" "winmm" "psapi" "shlwapi")
endif()